hive start

# Output to log, with and without regexp
metrics
metrics ^test

# Output to file and validate
metrics -o=actual ^test
cmp all actual

# Show only enabled metrics
metrics -e -o=actual ^test
cmp enabled actual

# Show sampled metrics
metrics -s -o=actual ^test
cmp sampled actual

# Show in json format
metrics -o=actual -format=json ^test
cmp all.json actual

# Show in yaml format
metrics -o=actual -format=yaml ^test
cmp all.yaml actual

# Show samples in json format
metrics -s -o=actual -format=json ^test
cmp sampled.json actual

# Show samples in yaml format
metrics -s -o=actual -format=yaml ^test
cmp sampled.yaml actual

-- all --
Metric   Labels   Value
test_A            1.000000
test_B            2.000000
-- enabled --
Metric   Labels   Value
test_A            1.000000
-- sampled --
Metric   Labels   1min       5min       15min
test_A            1.000000   0.000000   0.000000
test_B            2.000000   0.000000   0.000000
-- all.json --
[
  {
    "name": "test_A",
    "value": 1
  },
  {
    "name": "test_B",
    "value": 2
  }
]
-- all.yaml --
- name: test_A
  value: 1
- name: test_B
  value: 2
-- sampled.json --
[
  {
    "name": "test_A",
    "1min": 1,
    "5min": 0,
    "15min": 0
  },
  {
    "name": "test_B",
    "1min": 2,
    "5min": 0,
    "15min": 0
  }
]
-- sampled.yaml --
- name: test_A
  1min: 1
  5min: 0
  15min: 0
- name: test_B
  1min: 2
  5min: 0
  15min: 0
