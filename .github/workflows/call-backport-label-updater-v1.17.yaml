---
  name: Call Backport Label Updater
  on:
    pull_request_target:
      branches:
        - v1.17
      types:
        - closed

  jobs:
    call-backport-label-updater:
      name: Update backport labels for upstream PR
      permissions:
        pull-requests: write
        repository-projects: read
      if: |
        github.event.pull_request.merged == true &&
        contains(github.event.pull_request.body, 'upstream-prs') &&
        contains(join(github.event.pull_request.labels.*.name, ', '), 'backport/')
      uses: cilium/cilium/.github/workflows/update-label-backport-pr.yaml@v1.17
      with:
        pr-body: ${{ github.event.pull_request.body }}
        branch: ${{ github.base_ref }}
      secrets: inherit
