{{- if and .Values.ingressController.enabled .Values.ingressController.secretsNamespace.create .Values.ingressController.secretsNamespace.name }}
---
apiVersion: v1
kind: Namespace
metadata:
  name: {{ .Values.ingressController.secretsNamespace.name | quote }}
{{- end}}

# Only create the namespace if it's different from Ingress secret namespace or Ingress is not enabled.
{{- if and .Values.gatewayAPI.enabled .Values.gatewayAPI.secretsNamespace.create .Values.gatewayAPI.secretsNamespace.name
  (or (not (and .Values.ingressController.enabled .Values.ingressController.secretsNamespace.create .Values.ingressController.secretsNamespace.name))
      (ne .Values.gatewayAPI.secretsNamespace.name .Values.ingressController.secretsNamespace.name)) }}
---
apiVersion: v1
kind: Namespace
metadata:
  name: {{ .Values.gatewayAPI.secretsNamespace.name | quote }}
{{- end}}
# Only create the namespace if it's different from Ingress/GatewayAPI secret namespace or Ingress/GatewayAPI is not enabled.
{{- if and (ne .Values.loadBalancer.l7.backend "disabled") .Values.loadBalancer.l7.secretsNamespace.create .Values.loadBalancer.l7.secretsNamespace.name
  (and (not (and .Values.ingressController.enabled .Values.ingressController.secretsNamespace.create .Values.ingressController.secretsNamespace.name (eq .Values.loadBalancer.l7.secretsNamespace.name .Values.ingressController.secretsNamespace.name)))
        (not (and .Values.gatewayAPI.enabled .Values.gatewayAPI.secretsNamespace.create .Values.gatewayAPI.secretsNamespace.name (eq .Values.loadBalancer.l7.secretsNamespace.name .Values.gatewayAPI.secretsNamespace.name))))  }}
---
apiVersion: v1
kind: Namespace
metadata:
  name: {{ .Values.loadBalancer.l7.secretsNamespace.name | quote }}
{{- end}}
